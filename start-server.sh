#!/bin/bash
echo "ðŸš€ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ± Ù†Ø·Ù‚ Ù…ØµØ·Ù„Ø­..."

# Ù…ØªÙˆÙ‚Ù Ú©Ø±Ø¯Ù† Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ
echo "ðŸ” Ù…ØªÙˆÙ‚Ù Ú©Ø±Ø¯Ù† Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ..."
pkill -f "node.*professional-server" || true
pkill -f "node.*simple-server" || true

# Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯
sleep 2

# Ø¨Ø±Ø±Ø³ÛŒ Ù¾ÙˆØ±Øª
if lsof -i:3001 > /dev/null 2>&1; then
    echo "ðŸ”„ Ù¾ÙˆØ±Øª 3001 Ù…Ø´ØºÙˆÙ„ Ø§Ø³ØªØŒ Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù†..."
    fuser -k 3001/tcp 2>/dev/null || true
    sleep 2
fi

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ±
echo "ðŸŽ¯ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ± Ø¬Ø¯ÛŒØ¯..."
npm start
