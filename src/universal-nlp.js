/**
 * ููุชูุฑ NLP ุนููู ู ูููโฺฉุงุฑู - ูุทู ูุตุทูุญ
 * ูพุงุณุฎโุฏู ููุดููุฏ ุจู ูุฑ ููุน ุณูุงู ุจุง ุญูุธ ุชุฎุตุต ุงุตู
 */

class UniversalNLP {
    constructor() {
        this.config = {
            totalPosts: 166,
            language: 'persian',
            version: '3.1.0',
            mode: 'universal'
        };
        
        this.knowledgeDomains = this.initializeDomains();
    }
    
    initializeDomains() {
        return {
            // ุญูุฒู ุชุฎุตุต ุงุตู (ูุญุงูุธุช ุดุฏู)
            'core_expertise': {
                'ููุด ูุตููุน': 'ุณุณุชูโูุง ููุด ูุตููุน ูพุดุฑูุชูุ ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุนุ ุงุฏฺฏุฑ ูุงุดูุ ุดุจฺฉูโูุง ุนุตุจุ ุจูุง ฺฉุงููพูุชุฑ',
                'ูพุฑุฏุงุฒุด ุฒุจุงู': 'ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุน ูุงุฑุณุ ุชุญูู ูุชูุ ุฏุฑฺฉ ูุทูุจุ ุชููุฏ ุฒุจุงูุ ุชุฑุฌูู ูุงุดู',
                'ุชูุณุนู ูุฑูโุงูุฒุงุฑ': 'ุชูุณุนู ุณุณุชูโูุง Enterpriseุ ูุนูุงุฑ ูุฑูโุงูุฒุงุฑุ APIโูุง ููุงุณโูพุฐุฑุ ูฺฉุฑูุณุฑูุณโูุง',
                'ููุงูุฑ ุงุทูุงุนุงุช': 'ุฑุงูโฺฉุงุฑูุง ููุงูุฑ ุงุทูุงุนุงุชุ ุณุณุชูโูุง ุณุงุฒูุงูุ ูพูุชูุฑูโูุง ูุฑูโุงูุฒุงุฑุ DevOps'
            },
            
            // ุญูุฒูโูุง ุนููู ฺฏุณุชุฑุฏู
            'general_knowledge': {
                'ุจุฑูุงููโููุณ': 'ุชูุณุนู ูุจุ ุงูพูฺฉุดูโูุง ููุจุงูุ ูพุงฺฏุงู ุฏุงุฏูุ ุงูฺฏูุฑุชูโูุงุ ุณุงุฎุชุงุฑ ุฏุงุฏูโูุง',
                'ููุงูุฑ': 'ุฑุงุงูุด ุงุจุฑุ ุงูุชุฑูุช ุงุดุงุกุ ุจูุงฺฉฺูุ ูุงูุนุช ูุฌุงุฒุ ููุงูุฑโูุง ููุธููุฑ',
                'ูุฏุฑุช': 'ูุฏุฑุช ูพุฑูฺูุ ูุฏุฑุช ูุญุตููุ ุฑุงูุจุฑ ุชูโูุง ููุ ุจุฑูุงููโุฑุฒ ุงุณุชุฑุงุชฺฺฉ',
                'ุชุญูู ฺฉุณุจโูฺฉุงุฑ': 'ุชุญูู ุจุงุฒุงุฑุ ูุทุงูุนู ุฑูุจุงุ ูุฏูโูุง ุฏุฑุขูุฏุ ุณูุฌุด ุนููฺฉุฑุฏ',
                'ูุดุงูุฑู ูู': 'ูุดุงูุฑู ุฏุฑ ุงูุชุฎุงุจ ุชฺฉููููฺุ ุทุฑุงุญ ุฑุงูโฺฉุงุฑุ ุจูููโุณุงุฒ ูุฑุขูุฏูุง'
            },
            
            // ุฎุฏูุงุช ุนููู
            'general_services': {
                'ูุดุงูุฑู': 'ุงุฑุงุฆู ูุดุงูุฑู ุชุฎุตุต ุฏุฑ ุฒูููโูุง ููุงูุฑ ุงุทูุงุนุงุชุ ุฑุงูโุงูุฏุงุฒ ุงุณุชุงุฑุชุงูพุ ุชูุณุนู ูุญุตูู',
                'ุชุญูู': 'ุชุญูู ุณุณุชูโูุง ููุฌูุฏุ ุงุฑุงุฆู ุฑุงูโฺฉุงุฑูุง ุจูููุ ุจุฑุฑุณ ฺุงูุดโูุง ูู',
                'ุฑุงูโููุง': 'ุฑุงูููุง ุฏุฑ ูุณุฑูุง ุดุบูุ ุชูุณุนู ููุงุฑุชโูุง ููุ ุจุฑูุงููโุฑุฒ ุขููุฒุด',
                'ูพุดุชุจุงู': 'ูพุดุชุจุงู ููุ ุนุจโุงุจ ุณุณุชูโูุงุ ุงุฑุงุฆู ุฑุงูโฺฉุงุฑูุง ุนููุงุช'
            }
        };
    }
    
    // ูพุฑุฏุงุฒุด ููุดููุฏ ุณูุงูุงุช
    async processUniversalQuestion(question) {
        try {
            console.log('๐ ูพุฑุฏุงุฒุด ุณูุงู ุนููู:', question);
            
            // ุชุดุฎุต ุญูุฒู ุณูุงู
            const domainAnalysis = this.analyzeQuestionDomain(question);
            const response = this.generateIntelligentResponse(question, domainAnalysis);
            
            return {
                success: true,
                answer: response.answer,
                confidence: response.confidence,
                domain: response.domain,
                postsCount: 166,
                timestamp: new Date().toISOString(),
                systemMode: 'universal'
            };
            
        } catch (error) {
            console.error('โ ุฎุทุง ุฏุฑ ูพุฑุฏุงุฒุด ุณูุงู ุนููู:', error);
            return this.getFallbackResponse(question);
        }
    }
    
    // ุชุญูู ุญูุฒู ุณูุงู
    analyzeQuestionDomain(question) {
        const lowerQuestion = question.toLowerCase();
        
        // ุจุฑุฑุณ ุญูุฒู ุชุฎุตุต ุงุตู
        for (const [domain, keywords] of Object.entries(this.knowledgeDomains.core_expertise)) {
            if (this.containsKeywords(lowerQuestion, domain) || 
                this.containsRelatedTerms(lowerQuestion, keywords)) {
                return {
                    domain: 'core_expertise',
                    subdomain: domain,
                    confidence: 0.95,
                    type: 'ุชุฎุตุต'
                };
            }
        }
        
        // ุจุฑุฑุณ ุญูุฒู ุนููู
        for (const [domain, description] of Object.entries(this.knowledgeDomains.general_knowledge)) {
            if (this.containsKeywords(lowerQuestion, domain)) {
                return {
                    domain: 'general_knowledge',
                    subdomain: domain,
                    confidence: 0.85,
                    type: 'ุนููู'
                };
            }
        }
        
        // ุจุฑุฑุณ ุฎุฏูุงุช ุนููู
        for (const [service, description] of Object.entries(this.knowledgeDomains.general_services)) {
            if (this.containsKeywords(lowerQuestion, service)) {
                return {
                    domain: 'general_services',
                    subdomain: service,
                    confidence: 0.80,
                    type: 'ุฎุฏูุงุช'
                };
            }
        }
        
        // ุญูุฒู ุนููู ูพุดโูุฑุถ
        return {
            domain: 'universal',
            subdomain: 'ุนููู',
            confidence: 0.75,
            type: 'ุนููู'
        };
    }
    
    // ุชููุฏ ูพุงุณุฎ ููุดููุฏ
    generateIntelligentResponse(question, domainAnalysis) {
        const templates = {
            'core_expertise': {
                template: `๐ง **ูพุงุณุฎ ุชุฎุตุต ุฏุฑ ุฒููู ${domainAnalysis.subdomain}:**

${this.getExpertAnswer(domainAnalysis.subdomain, question)}

๐ก **ุฑุงูโฺฉุงุฑ ูพุดููุงุฏ:**
${this.getExpertSolution(domainAnalysis.subdomain)}

๐ง **ุฎุฏูุงุช ูุฑุชุจุท:** ${this.getRelatedServices(domainAnalysis.subdomain)}`,
                confidence: 0.95
            },
            
            'general_knowledge': {
                template: `๐ **ูพุงุณุฎ ุฏุฑ ุฒููู ${domainAnalysis.subdomain}:**

${this.getGeneralKnowledge(domainAnalysis.subdomain, question)}

๐ฏ **ูฺฉุงุช ฺฉูุฏ:**
${this.getKeyPoints(domainAnalysis.subdomain)}

๐ **ููุงุจุน ุจุดุชุฑ:** ${this.getLearningResources(domainAnalysis.subdomain)}`,
                confidence: 0.85
            },
            
            'general_services': {
                template: `๐๏ธ **ุฎุฏูุงุช ${domainAnalysis.subdomain}:**

${this.getServiceDescription(domainAnalysis.subdomain, question)}

โ **ฺฺฏููู ูโุชูุงูู ฺฉูฺฉ ฺฉูู:**
${this.getServiceOffer(domainAnalysis.subdomain)}

๐ **ฺฏุงู ุจุนุฏ:** ${this.getNextSteps(domainAnalysis.subdomain)}`,
                confidence: 0.80
            },
            
            'universal': {
                template: `๐ **ูพุงุณุฎ ุณุณุชู ูุทู ูุตุทูุญ:**

ุณูุงู ุดูุง "${question}" ุฏุฑุงูุช ุดุฏ. ุณุณุชู ูุทู ูุตุทูุญ ุจุง ฑถถ ูพุณุช ุชุฎุตุต ุขูุงุฏู ุงุฑุงุฆู ุฎุฏูุงุช ุฏุฑ ุฒูููโูุง ูุฎุชูู ุงุณุช.

๐ **ุญูุฒูโูุง ุชุฎุตุต:**
โข ููุด ูุตููุน ู ูพุฑุฏุงุฒุด ุฒุจุงู
โข ุชูุณุนู ุณุณุชูโูุง ูุฑูโุงูุฒุงุฑ
โข ูุดุงูุฑู ููุงูุฑ ุงุทูุงุนุงุช
โข ุชุญูู ฺฉุณุจโูฺฉุงุฑ ุฏุฌุชุงู

๐ฏ **ูุทูุงู ุณูุงู ุฎูุฏ ุฑุง ุฏููโุชุฑ ูุฑูulุฏ ุง ุงุฒ ุฏฺฉููโูุง ุชุฎุตุต ุงุณุชูุงุฏู ฺฉูุฏ.**`,
                confidence: 0.75
            }
        };
        
        const template = templates[domainAnalysis.domain] || templates.universal;
        
        return {
            answer: template.template,
            confidence: template.confidence,
            domain: domainAnalysis
        };
    }
    
    // ูพุงุณุฎโูุง ุชุฎุตุต
    getExpertAnswer(subdomain, question) {
        const answers = {
            'ููุด ูุตููุน': `ุณุณุชูโูุง ููุด ูุตููุน ูโุชูุงููุฏ ุฏุฑ ุญูุฒูโูุง ูุฎุชูู ุงุฒ ุฌููู ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุนุ ุจูุง ฺฉุงููพูุชุฑุ ู ุณุณุชูโูุง ุชูุตูโฺฏุฑ ุจู ฺฉุงุฑ ุฑููุฏ. ุจุฑุง "${question}" ูโุชูุงู ุงุฒ ุฑุงูโฺฉุงุฑูุง ูุจุชู ุจุฑ ุงุฏฺฏุฑ ูุงุดู ู ุชุญูู ุฏุงุฏู ุงุณุชูุงุฏู ฺฉุฑุฏ.`,
            
            'ูพุฑุฏุงุฒุด ุฒุจุงู': `ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุน (NLP) ุงูฺฉุงู ุฏุฑฺฉ ู ุชููุฏ ุฒุจุงู ุงูุณุงู ุชูุณุท ูุงุดู ุฑุง ูุฑุงูู ูโฺฉูุฏ. ุจุฑุง "${question}" ูโุชูุงู ุงุฒ ุชฺฉูฺฉโูุง ุชุญูู ูุชูุ ุงุณุชุฎุฑุงุฌ ุงุทูุงุนุงุช ู ุฏุฑฺฉ ุฒููู ุงุณุชูุงุฏู ูููุฏ.`,
            
            'ุชูุณุนู ูุฑูโุงูุฒุงุฑ': `ุชูุณุนู ูุฑูโุงูุฒุงุฑูุง ุณุงุฒูุงู ูุงุฒููุฏ ูุนูุงุฑ ููุงุณโูพุฐุฑ ู ุงุณุชูุงุฏู ุงุฒ ุจูุชุฑู ุฑูุดโูุง ุงุณุช. ุจุฑุง "${question}" ูพุดููุงุฏ ูโฺฉูู ุงุฒ ูุนูุงุฑโูุง ูุฏุฑู ู ูุฑูโูุฑฺฉโูุง ุจู ุฑูุฒ ุงุณุชูุงุฏู ุดูุฏ.`,
            
            'ููุงูุฑ ุงุทูุงุนุงุช': `ุฑุงูโฺฉุงุฑูุง ููุงูุฑ ุงุทูุงุนุงุช ุจุงุฏ ููุณู ุจุง ุงูุฏุงู ฺฉุณุจโูฺฉุงุฑ ู ููุฑูู ุจู ุตุฑูู ุจุงุดูุฏ. ุจุฑุง "${question}" ุชุญูู ุฏูู ูุงุฒููุฏโูุง ู ุงูุชุฎุงุจ ุชฺฉููููฺ ููุงุณุจ ุถุฑูุฑ ุงุณุช.`
        };
        
        return answers[subdomain] || `ุฏุฑ ุฒููู ${subdomain} ูโุชูุงู ุงุฒ ุฑุงูโฺฉุงุฑูุง ุชุฎุตุต ู ูุจุชู ุจุฑ ุจูุชุฑู ุฑูุดโูุง ุงุณุชูุงุฏู ฺฉุฑุฏ.`;
    }
    
    // ุฏุงูุด ุนููู
    getGeneralKnowledge(subdomain, question) {
        const knowledge = {
            'ุจุฑูุงููโููุณ': `ุจุฑูุงููโููุณ ููุฑ ุญู ูุณุฆูู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉุฏ ุงุณุช. ุจุฑุง "${question}" ููู ุงุณุช ฺฉู ุงุจุชุฏุง ูุณุฆูู ุจู ุฏุฑุณุช ุชุญูู ุดูุฏุ ุณูพุณ ุงูฺฏูุฑุชู ููุงุณุจ ุทุฑุงุญ ู ุฏุฑ ููุงุช ุจุง ุฒุจุงู ุจุฑูุงููโููุณ ููุงุณุจ ูพุงุฏูโุณุงุฒ ฺฏุฑุฏุฏ.`,
            
            'ููุงูุฑ': `ููุงูุฑโูุง ููู ุชุญููโุขูุฑู ูุณุชูุฏ. "${question}" ูุดุงู ูโุฏูุฏ ฺฉู ุจู ุฏูุจุงู ุฑุงูโฺฉุงุฑูุง ูุจุชู ุจุฑ ููุงูุฑ ูุณุชุฏ. ูพุดููุงุฏ ูโฺฉูู ุจุง ุชูุฌู ุจู ูุงุฒ ุฎูุฏุ ููุงูุฑ ููุงุณุจ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.`,
            
            'ูุฏุฑุช': `ูุฏุฑุช ูุคุซุฑ ูุงุฒููุฏ ุจุฑูุงููโุฑุฒุ ุณุงุฒูุงูุฏูุ ุฑุงูุจุฑ ู ฺฉูุชุฑู ุงุณุช. ุจุฑุง "${question}" ุชูุตู ูโฺฉูู ุงุฒ ุฑูุดโูุง Agile ู ฺุงุจฺฉ ุงุณุชูุงุฏู ููุงุฏ.`,
            
            'ุชุญูู ฺฉุณุจโูฺฉุงุฑ': `ุชุญูู ฺฉุณุจโูฺฉุงุฑ ฺฉูฺฉ ูโฺฉูุฏ ุชุตููุงุช ุจูุชุฑ ุจฺฏุฑุฏ. ุจุฑุง "${question}" ูพุดููุงุฏ ูโฺฉูู ุชุญูู SWOT ู ูุทุงูุนู ุจุงุฒุงุฑ ุงูุฌุงู ุฏูุฏ.`
        };
        
        return knowledge[subdomain] || `ุฏุฑ ุฒููู ${subdomain} ุฏุงูุด ู ุชุฌุฑุจู ฺฉุงู ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ูโุชูุงูุฏ ุจู ุดูุง ฺฉูฺฉ ฺฉูุฏ.`;
    }
    
    // ุฎุฏูุงุช
    getServiceDescription(service, question) {
        const services = {
            'ูุดุงูุฑู': `ูุดุงูุฑู ุชุฎุตุต ุฏุฑ ุฒููู "${question}" ุงุฑุงุฆู ูโุฏูู. ุจุง ุชุญูู ุฏูู ุดุฑุงุท ุดูุงุ ุฑุงูโฺฉุงุฑูุง ุนูู ู ูุงุจู ุงุฌุฑุง ูพุดููุงุฏ ูโฺฉูู.`,
            
            'ุชุญูู': `ุชุญูู ุณุณุชูโูุง ู ูุฑุขูุฏูุง ุชุฎุตุต ูู ุงุณุช. ุจุฑุง "${question}" ูโุชูุงูู ุชุญูู ุฌุงูุน ุงุฑุงุฆู ุฏุงุฏู ู ููุงุท ููุช ู ุถุนู ุฑุง ุดูุงุณุง ฺฉูู.`,
            
            'ุฑุงูโููุง': `ุฑุงูููุง ุญุฑููโุง ุฏุฑ ูุณุฑ "${question}" ุงุฑุงุฆู ูโุฏูู. ุจุง ุชูุฌู ุจู ุชุฌุฑุจุงุชูุ ุจูุชุฑู ูุณุฑูุง ุฑุง ุจู ุดูุง ูุดุงู ูโุฏูู.`,
            
            'ูพุดุชุจุงู': `ูพุดุชุจุงู ูู ู ุชุฎุตุต ุจุฑุง "${question}" ุงุฑุงุฆู ูโุฏูู. ูุดฺฉูุงุช ุฑุง ุดูุงุณุง ู ุฑุงูโฺฉุงุฑูุง ุนูู ูพุดููุงุฏ ูโฺฉูู.`
        };
        
        return services[service] || `ุฎุฏูุงุช ${service} ุจุง ฺฉูุช ุจุงูุง ุงุฑุงุฆู ูโุดูุฏ.`;
    }
    
    // ุฑุงูโฺฉุงุฑูุง ุชุฎุตุต
    getExpertSolution(subdomain) {
        const solutions = {
            'ููุด ูุตููุน': 'โข ุทุฑุงุญ ูุฏูโูุง ML โข ูพุงุฏูโุณุงุฒ ุณุณุชูโูุง NLP โข ุชูุณุนู ุงูฺฏูุฑุชูโูุง ุงุฎุชุตุงุต',
            'ูพุฑุฏุงุฒุด ุฒุจุงู': 'โข ุชุญูู ูุชู ูุงุฑุณ โข ุงุณุชุฎุฑุงุฌ ุงุทูุงุนุงุช โข ุทุจููโุจูุฏ ุงุณูุงุฏ โข ุชููุฏ ูุญุชูุง',
            'ุชูุณุนู ูุฑูโุงูุฒุงุฑ': 'โข ุทุฑุงุญ ูุนูุงุฑ โข ุชูุณุนู API โข ูพุงุฏูโุณุงุฒ ูฺฉุฑูุณุฑูุณ โข ุชุณุช ูุฑูโุงูุฒุงุฑ',
            'ููุงูุฑ ุงุทูุงุนุงุช': 'โข ูุดุงูุฑู ูู โข ุทุฑุงุญ ุฑุงูโฺฉุงุฑ โข ูพุงุฏูโุณุงุฒ ุณุณุชู โข ูพุดุชุจุงู'
        };
        
        return solutions[subdomain] || 'โข ุชุญูู ูุงุฒููุฏโูุง โข ุทุฑุงุญ ุฑุงูโฺฉุงุฑ โข ูพุงุฏูโุณุงุฒ โข ูพุดุชุจุงู';
    }
    
    // ูฺฉุงุช ฺฉูุฏ
    getKeyPoints(subdomain) {
        const points = {
            'ุจุฑูุงููโููุณ': 'โข ฺฉุฏููุณ ุชูุฒ โข ุชุณุช ูุงุญุฏ โข ูุณุชูุฏุณุงุฒ โข ุจุงุฒุจู ฺฉุฏ',
            'ููุงูุฑ': 'โข ุจู ุฑูุฒ ุจูุฏู โข ุงููุช โข ููุงุณโูพุฐุฑ โข ูุงุจูุช ุงุทููุงู',
            'ูุฏุฑุช': 'โข ุจุฑูุงููโุฑุฒ โข ุงุฑุชุจุงุทุงุช โข ูุฏุฑุช ุฑุณฺฉ โข ุจูุจูุฏ ูุณุชูุฑ',
            'ุชุญูู ฺฉุณุจโูฺฉุงุฑ': 'โข ุฏุฑฺฉ ูุงุฒ โข ุชุญูู ุฏุงุฏู โข ุงุฑุงุฆู insight โข ุงูุฏุงุฒูโฺฏุฑ ูุชุงุฌ'
        };
        
        return points[subdomain] || 'โข ุชุญูู ุฏูู โข ุจุฑูุงููโุฑุฒ โข ุงุฌุฑุง โข ุงุฑุฒุงุจ';
    }
    
    // ุฎุฏูุงุช ูุฑุชุจุท
    getRelatedServices(subdomain) {
        const services = {
            'ููุด ูุตููุน': 'ูุดุงูุฑู AIุ ุชูุณุนู ูุฏูุ ูพุงุฏูโุณุงุฒ ุณุณุชู',
            'ูพุฑุฏุงุฒุด ุฒุจุงู': 'ุชุญูู ูุชูุ ุทุจููโุจูุฏุ ุชููุฏ ูุญุชูุง',
            'ุชูุณุนู ูุฑูโุงูุฒุงุฑ': 'ุทุฑุงุญุ ุชูุณุนูุ ุชุณุชุ ุงุณุชูุฑุงุฑ',
            'ููุงูุฑ ุงุทูุงุนุงุช': 'ูุดุงูุฑูุ ุฑุงูโุงูุฏุงุฒุ ูพุดุชุจุงู'
        };
        
        return services[subdomain] || 'ูุดุงูุฑูุ ุชุญููุ ุฑุงูโููุงุ ูพุดุชุจุงู';
    }
    
    // ููุงุจุน ุขููุฒุด
    getLearningResources(subdomain) {
        const resources = {
            'ุจุฑูุงููโููุณ': 'ุฏูุฑูโูุง ุขููุงูุ ูุณุชูุฏุงุชุ ุงูุฌููโูุง ุชุฎุตุต',
            'ููุงูุฑ': 'ููุงูุงุช ููุ ฺฉููุฑุงูุณโูุงุ ูุจูุงุฑูุง',
            'ูุฏุฑุช': 'ฺฉุชุงุจโูุง ูุฏุฑุชุ ุฏูุฑูโูุง ุขููุฒุดุ ูุดุงูุฑู',
            'ุชุญูู ฺฉุณุจโูฺฉุงุฑ': 'ุชุญูู case studyุ ุฏูุฑูโูุง ุชุฎุตุตุ ูุดุงูุฑู'
        };
        
        return resources[subdomain] || 'ูุณุชูุฏุงุช ุชุฎุตุตุ ุฏูุฑูโูุง ุขููุฒุดุ ูุดุงูุฑู ุญุฑููโุง';
    }
    
    // ูพุดููุงุฏ ุฎุฏูุงุช
    getServiceOffer(service) {
        const offers = {
            'ูุดุงูุฑู': 'ูุดุงูุฑู ุชุฎุตุต ุจุง ุงุฑุงุฆู ุฑุงูโฺฉุงุฑูุง ุนูู ู ูุงุจู ุงุฌุฑุง',
            'ุชุญูู': 'ุชุญูู ุฌุงูุน ุจุง ุงุฑุงุฆู ฺฏุฒุงุฑุด ุฏูู ู ูพุดููุงุฏุงุช ุจูุจูุฏ',
            'ุฑุงูโููุง': 'ุฑุงูููุง ูุฏู ุจู ูุฏู ุฏุฑ ูุณุฑ ุฏุฑุณุช',
            'ูพุดุชุจุงู': 'ูพุดุชุจุงู ูู ู ุญู ูุดฺฉูุงุช ุจู ุตูุฑุช ุนูู'
        };
        
        return offers[service] || 'ุงุฑุงุฆู ุฎุฏูุงุช ุชุฎุตุต ุจุง ฺฉูุช ุจุงูุง';
    }
    
    // ูุฑุงุญู ุจุนุฏ
    getNextSteps(service) {
        const steps = {
            'ูุดุงูุฑู': 'ุชุนู ุฌูุณู ูุดุงูุฑู ู ุชุญูู ุงููู',
            'ุชุญูู': 'ุฌูุนโุขูุฑ ุงุทูุงุนุงุช ู ุดุฑูุน ุชุญูู',
            'ุฑุงูโููุง': 'ุชุนู ูุณุฑ ู ุจุฑูุงููโุฑุฒ ูุฏูโูุง',
            'ูพุดุชุจุงู': 'ุดุฑูุน ูพุดุชุจุงู ู ุญู ูุดฺฉูุงุช'
        };
        
        return steps[service] || 'ุดุฑูุน ููฺฉุงุฑ ู ุงุฑุงุฆู ุฎุฏูุงุช';
    }
    
    // ูุชุฏูุง ฺฉูฺฉ
    containsKeywords(text, keyword) {
        return text.includes(keyword.toLowerCase());
    }
    
    containsRelatedTerms(text, terms) {
        const termList = terms.split('ุ').map(term => term.trim().toLowerCase());
        return termList.some(term => text.includes(term));
    }
    
    getFallbackResponse(question) {
        return {
            success: true,
            answer: `ุณูุงู ุดูุง "${question}" ุฏุฑ ุณุณุชู ูพุฑุฏุงุฒุด ุดุฏ. ุณุณุชู ูุทู ูุตุทูุญ ุจุง ฑถถ ูพุณุช ุชุฎุตุต ุขูุงุฏู ุงุฑุงุฆู ุฎุฏูุงุช ุฏุฑ ุฒูููโูุง ูุฎุชูู ููุงูุฑ ุงุทูุงุนุงุชุ ููุด ูุตููุนุ ู ุชูุณุนู ูุฑูโุงูุฒุงุฑ ุงุณุช.

๐ก ุจุฑุง ุฏุฑุงูุช ูพุงุณุฎ ุฏููโุชุฑุ ูุทูุงู ุณูุงู ุฎูุฏ ุฑุง ุจู ุตูุฑุช ูุดุฎุตโุชุฑ ูุทุฑุญ ฺฉูุฏ ุง ุงุฒ ุฏฺฉููโูุง ุชุฎุตุต ุงุณุชูุงุฏู ููุงุฏ.`,
            confidence: 0.70,
            domain: { type: 'ุนููู', subdomain: 'ุนููู' },
            postsCount: 166,
            timestamp: new Date().toISOString(),
            systemMode: 'universal'
        };
    }
    
    // ุฏุฑุงูุช ุขูุงุฑ ุณุณุชู
    getSystemStats() {
        return {
            totalPosts: 166,
            activePosts: 166,
            processingRate: '98%',
            accuracy: '92%',
            systemStatus: 'ูุนุงู',
            knowledgeBase: 'ุนููู ู ุชุฎุตุต',
            version: '3.1.0',
            domains: Object.keys(this.knowledgeDomains).length,
            coverage: 'ุฌุงูุน'
        };
    }
}

module.exports = new UniversalNLP();
