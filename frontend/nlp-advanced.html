<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>NLP Ù¾ÛŒØ´Ø±ÙØªÙ‡ - ØªØ­Ù„ÛŒÙ„ Û±Û¶Û² Ù¾Ø³Øª</title>
    <style>
        body { font-family: Tahoma; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #4CAF50; padding-bottom: 20px; }
        .btn { background: #4CAF50; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 5px; cursor: pointer; }
        .analysis-section { margin: 20px 0; padding: 15px; background: #f9f9f9; border-radius: 5px; }
        .post-card { border: 1px solid #ddd; margin: 10px 0; padding: 15px; border-radius: 5px; }
        .sentiment-positive { color: green; }
        .sentiment-negative { color: red; }
        .sentiment-neutral { color: blue; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¦œ ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ NLP</h1>
            <p>ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø³Øªâ€ŒÙ‡Ø§: <span id="postCount">0</span></p>
            <button class="btn" onclick="generatePosts()">ğŸš€ ØªÙˆÙ„ÛŒØ¯ Û±Û¶Û² Ù¾Ø³Øª</button>
            <button class="btn" onclick="analyzeSentiment()">ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª</button>
            <button class="btn" onclick="extractKeywords()">ğŸ”‘ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ</button>
        </div>
        
        <div id="analysisResults"></div>
        <div id="postsContainer"></div>
    </div>

    <script>
        async function generatePosts() {
            const response = await fetch('/api/nlp/generate-samples', { method: 'POST' });
            const result = await response.json();
            alert(result.message);
            loadPosts();
        }

        async function loadPosts() {
            const response = await fetch('/api/nlp/posts');
            const posts = await response.json();
            document.getElementById('postCount').textContent = posts.length;
        }

        async function analyzeSentiment() {
            const response = await fetch('/api/nlp/sentiment');
            const posts = await response.json();
            
            const analysis = posts.reduce((acc, post) => {
                acc[post.sentiment.sentiment] = (acc[post.sentiment.sentiment] || 0) + 1;
                return acc;
            }, {});
            
            document.getElementById('analysisResults').innerHTML = `
                <div class="analysis-section">
                    <h3>ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª Û±Û¶Û² Ù¾Ø³Øª:</h3>
                    <p>Ù…Ø«Ø¨Øª: <span class="sentiment-positive">${analysis.Ù…Ø«Ø¨Øª || 0}</span></p>
                    <p>Ù…Ù†ÙÛŒ: <span class="sentiment-negative">${analysis.Ù…Ù†ÙÛŒ || 0}</span></p>
                    <p>Ø®Ù†Ø«ÛŒ: <span class="sentiment-neutral">${analysis.Ø®Ù†Ø«ÛŒ || 0}</span></p>
                </div>
            `;
        }

        async function extractKeywords() {
            const response = await fetch('/api/nlp/keywords');
            const keywords = await response.json();
            
            let html = '<div class="analysis-section"><h3>ğŸ”‘ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ø¨Ø±ØªØ±:</h3>';
            keywords.slice(0, 10).forEach(item => {
                html += `<div><strong>${item.title}:</strong> `;
                item.keywords.forEach(kw => {
                    html += `${kw.word}(${kw.count}) `;
                });
                html += '</div>';
            });
            html += '</div>';
            
            document.getElementById('analysisResults').innerHTML = html;
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        loadPosts();
    </script>
</body>
</html>
